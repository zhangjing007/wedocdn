/*! For license information please see Hyperlink.min.js.LICENSE.txt */
(()=>{var e={96643:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(87537),r=n.n(i),a=n(23645),o=n.n(a)()(r());o.push([e.id,".adsk-viewing-viewer .hyperlink-tooltip{display:block;position:absolute;left:0px;top:0px;padding:4px;background-color:rgba(196,196,196,0.8);box-shadow:0px 1px 3px rgba(0,0,0,0.3);font-size:12px;text-align:center;line-height:1.2;white-space:nowrap}.adsk-viewing-viewer .hyperlink-container{position:absolute;width:250px;z-index:10}.adsk-viewing-viewer .hyperlink-container-triangle{position:relative;display:inline-block;width:0;height:0;border-top:11px solid transparent;border-bottom:11px solid transparent;z-index:3}.adsk-viewing-viewer .hyperlink-panel{display:inline-block;width:300px}.adsk-viewing-viewer .hyperlink-panel.thumbnail{width:220px}.adsk-viewing-viewer .hyperlink-panel-title{padding:10px 5px 5px 10px}.adsk-viewing-viewer .hyperlink-panel-thumbnail{display:block;background:#FFFFFF;margin:3px 0px 10px 10px;width:200px;height:200px}.adsk-viewing-viewer .hyperlink-panel-external-link{font-size:12px;margin:5px 10px 10px 10px;padding:5px 5px 5px 5px;max-height:300px;word-break:break-all;-webkit-user-select:text;-khtml-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.adsk-viewing-viewer .hyperlink-panel-view-button{background-color:#6892C6;text-align:center;padding:7px 0px;margin:0px 10px 10px 10px;border-radius:1px;-moz-border-radius:1px;-webkit-border-radius:1px;cursor:pointer}.adsk-viewing-viewer .hyperlink-back{position:absolute;width:106px;height:38px;left:10px;top:10px}.adsk-viewing-viewer .hyperlink-back-button{top:0;left:0;width:70%;cursor:pointer;text-align:center;position:absolute}.adsk-viewing-viewer .docking-panel-close.hyperlink-back-closer{width:30%;cursor:pointer;background-position:3px 12px;height:100%}.adsk-viewing-viewer .viewer-ext-hyperlink-thumbnail-spinner{position:absolute;top:104px;left:77px;animation:loading-spinner-perpetual-motion 1s infinite linear;width:60px}\n","",{version:3,sources:["webpack://./extensions/Hyperlink/Hyperlink.css"],names:[],mappings:"AAAA,wCACI,aAAc,CACd,iBAAkB,CAClB,QAAS,CACT,OAAQ,CACR,WAAY,CACZ,sCAA0C,CAC1C,sCAA0C,CAC1C,cAAe,CACf,iBAAkB,CAClB,eAAgB,CAChB,kBAAmB,CACtB,0CAGG,iBAAkB,CAClB,WAAa,CACb,UAAW,CACd,mDAGG,iBAAkB,CAClB,oBAAqB,CACrB,OAAQ,CACR,QAAS,CACT,iCAAkC,CAClC,oCAAqC,CACrC,SAAU,CACb,sCAGG,oBAAqB,CACrB,WAAa,CAChB,gDAGG,WAAY,CACf,4CAGG,yBAA0B,CAC7B,gDAGG,aAAc,CACd,kBAAoB,CACpB,wBAAyB,CACzB,WAAa,CACb,YAAc,CACjB,oDAGG,cAAe,CACf,yBAA0B,CAC1B,uBAAwB,CACxB,gBAAiB,CACjB,oBAAqB,CAErB,wBAAyB,CACzB,uBAAwB,CACxB,qBAAsB,CACtB,oBAAqB,CACrB,gBAAiB,CACpB,kDAGG,wBAA0B,CAE1B,iBAAkB,CAClB,eAAgB,CAChB,yBAA0B,CAC1B,iBAAmB,CACnB,sBAAwB,CACxB,yBAA2B,CAC3B,cAAe,CAClB,qCAGG,iBAAkB,CAClB,WAAa,CACb,WAAa,CACb,SAAU,CACV,QAAS,CACZ,4CAGG,KAAM,CACN,MAAO,CACP,SAAU,CACV,cAAe,CACf,iBAAkB,CAClB,iBAAkB,CACrB,gEAGG,SAAU,CACV,cAAe,CACf,4BAA6B,CAC7B,WAAY,CACf,6DAGG,iBAAkB,CAClB,SAAU,CACV,SAAU,CACV,6DAA8D,CAC9D,UAAW",sourcesContent:[".adsk-viewing-viewer .hyperlink-tooltip {\n    display: block;\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    padding: 4px;\n    background-color: rgba(196, 196, 196, 0.8);\n    box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.3);\n    font-size: 12px;\n    text-align: center;\n    line-height: 1.2;\n    white-space: nowrap;\n}\n\n.adsk-viewing-viewer .hyperlink-container {\n    position: absolute;\n    width : 250px;\n    z-index: 10;\n}\n\n.adsk-viewing-viewer .hyperlink-container-triangle {\n    position: relative;\n    display: inline-block;\n    width: 0;\n    height: 0;\n    border-top: 11px solid transparent;\n    border-bottom: 11px solid transparent;\n    z-index: 3;\n}\n\n.adsk-viewing-viewer .hyperlink-panel {\n    display: inline-block;\n    width : 300px;\n}\n\n.adsk-viewing-viewer .hyperlink-panel.thumbnail {\n    width: 220px;\n}\n\n.adsk-viewing-viewer .hyperlink-panel-title {\n    padding: 10px 5px 5px 10px;\n}\n\n.adsk-viewing-viewer .hyperlink-panel-thumbnail {\n    display: block;\n    background : #FFFFFF;\n    margin: 3px 0px 10px 10px;\n    width : 200px;\n    height : 200px;\n}\n\n.adsk-viewing-viewer .hyperlink-panel-external-link {\n    font-size: 12px;\n    margin: 5px 10px 10px 10px;\n    padding: 5px 5px 5px 5px;\n    max-height: 300px;\n    word-break: break-all;\n\n    -webkit-user-select: text;\n    -khtml-user-select: text;\n    -moz-user-select: text;\n    -ms-user-select: text;\n    user-select: text;\n}\n\n.adsk-viewing-viewer .hyperlink-panel-view-button {\n    background-color : #6892C6;\n    /*height : 27px;*/\n    text-align: center;\n    padding: 7px 0px;\n    margin: 0px 10px 10px 10px;\n    border-radius : 1px;\n    -moz-border-radius : 1px;\n    -webkit-border-radius : 1px;\n    cursor: pointer;\n}\n\n.adsk-viewing-viewer .hyperlink-back {\n    position: absolute;\n    width : 106px;\n    height : 38px;\n    left: 10px;\n    top: 10px;\n}\n\n.adsk-viewing-viewer .hyperlink-back-button {\n    top: 0;\n    left: 0;\n    width: 70%;\n    cursor: pointer;\n    text-align: center;\n    position: absolute;\n}\n\n.adsk-viewing-viewer .docking-panel-close.hyperlink-back-closer {\n    width: 30%;\n    cursor: pointer;\n    background-position: 3px 12px;\n    height: 100%;\n}\n\n.adsk-viewing-viewer .viewer-ext-hyperlink-thumbnail-spinner {\n    position: absolute;\n    top: 104px;\n    left: 77px;\n    animation: loading-spinner-perpetual-motion 1s infinite linear; /* from styles.css */\n    width: 60px;\n}"],sourceRoot:""}]);const l=o},23645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(o[s]=!0)}for(var p=0;p<e.length;p++){var c=[].concat(e[p]);i&&o[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),t.push(c))}},t}},87537:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),a="/*# ".concat(r," */"),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(o).concat([a]).join("\n")}return[t].join("\n")}},93379:e=>{"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var a={},o=[],l=0;l<e.length;l++){var s=e[l],p=i.base?s[0]+i.base:s[0],c=a[p]||0,h="".concat(p," ").concat(c);a[p]=c+1;var d=n(h),u={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(t[d].references++,t[d].updater(u)):t.push({identifier:h,updater:r(u,i),references:1}),o.push(h)}return o}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var a=i(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var l=n(a[o]);t[l].references--}for(var s=i(e,r),p=0;p<a.length;p++){var c=n(a[p]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}a=s}}},90569:e=>{"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},19216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t),t}},3565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i=n.css,r=n.media,a=n.sourceMap;r?e.setAttribute("media",r):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(i,e)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},44589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={id:i,exports:{}};return e[i](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{"use strict";n.r(i),n.d(i,{HyperlinkExtension:()=>H});var e=AutodeskNamespace("Autodesk.Viewing.Extensions.Hyperlink"),t=Autodesk.Viewing,r=Autodesk.Viewing.Private;function a(e,n,i,a,o,l,s,p,c,h){var d=this;this.viewer=n,this.setGlobalManager(n.globalManager);var u=null;c&&(u=c.data);var v=this.getDocument();if(this.container=v.createElement("div"),this.container.className="hyperlink-container",n.container.appendChild(this.container),this.container.style.left=i.x+"px",this.container.style.top=i.y-70+"px",this.intersectPoint=a,this.dbId=p,this.triangle=v.createElement("div"),this.triangle.classList.add("hyperlink-container-triangle"),this.container.appendChild(this.triangle),this.panel=v.createElement("div"),this.panel.classList.add("docking-panel"),this.panel.classList.add("docking-panel-container-solid-color-a"),this.panel.classList.add("hyperlink-panel"),this.container.appendChild(this.panel),this.title=v.createElement("div"),this.title.className="hyperlink-panel-title",o?this.title.textContent=o:(this.title.setAttribute("data-i18n","External Link"),this.title.textContent=t.i18n.translate("External Link")),this.panel.appendChild(this.title),u){this.panel.classList.add("thumbnail"),this.thumbnail=v.createElement("img"),this.thumbnail.className="hyperlink-panel-thumbnail";var A=v.createElement("img");A.src=r.getResourceUrl("res/ui/spinner.png"),A.classList.add("viewer-ext-hyperlink-thumbnail-spinner"),this.panel.appendChild(A),this.spinnerDiv=A,h(p,c,(function(e){d.spinnerDiv.style.display="none",e&&(d.thumbnail.src=e)})),this.panel.appendChild(this.thumbnail)}else this.panel.classList.add("link"),this.externalLink=v.createElement("div"),this.externalLink.className="hyperlink-panel-external-link",this.externalLink.textContent=l,this.panel.appendChild(this.externalLink);this.viewButton=v.createElement("div"),this.viewButton.className="docking-panel-primary-button",this.viewButton.setAttribute("data-i18n","View"),this.viewButton.textContent=t.i18n.translate("View"),this.panel.appendChild(this.viewButton),this.viewButton.addEventListener("click",(function(){d.uninitialize(),e.panel=null,n.__hyperlinkBack&&(n.__hyperlinkBack.uninitialize(),n.__hyperlinkBack=null);var i=n.model.getDocumentNode();e.navigateToLink(l,c),u&&n.dispatchEvent({type:t.HYPERLINK_NAVIGATE,data:{node:i}})})),this.triangle.style.bottom=this.container.clientHeight-85+"px",this.boundsCheck()}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}t.GlobalManagerMixin.call(a.prototype),a.prototype.uninitialize=function(){this.viewer.container.removeChild(this.container),this.container=null},a.prototype.boundsCheck=function(){var e=this.viewer.navigation.getScreenViewport(),t=this.container.clientWidth,n=this.container.clientHeight,i=parseInt(this.container.style.left,10),r=parseInt(this.container.style.top,10),a=i,o=r;i<0&&(a=0),r<0&&(o=0),e.width<i+t&&(a=e.width-t),e.height<r+n&&(o=e.height-n);var l=this.viewer.navigation.getEyeVector().length(),s=this.viewer.impl.clientToViewport(i,r),p=this.viewer.impl.clientToViewport(a,o);s.subVectors(s,p),this.viewer.navigation.panRelative(s.x/2,s.y/2,l),this.container.style.left=a+"px",this.container.style.top=o+"px"},a.prototype.updatePosition=function(){var e=this.viewer.navigation.getCamera(),t=this.viewer.navigation.getScreenViewport(),n=(new THREE.Vector3).copy(this.intersectPoint);n.project(e);var i=Math.round((n.x+1)/2*t.width),r=Math.round((1-n.y)/2*t.height);this.container.style.left=i+"px",this.container.style.top=r-70+"px"},e.HyperlinkPanel=a;var l=Autodesk.Viewing,s=function(){function e(t,n,i){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.viewer=n,this.setGlobalManager(n.globalManager);var a=this.getDocument();this.container=a.createElement("div"),this.container.classList.add("docking-panel-primary-button"),this.container.classList.add("hyperlink-back"),n.container.appendChild(this.container),this.backButton=a.createElement("div"),this.backButton.className="hyperlink-back-button",this.backButton.setAttribute("data-i18n","Back"),this.backButton.textContent=l.i18n.translate("Back"),this.container.appendChild(this.backButton),this.backButton.addEventListener("click",(function(){r.uninitialize(),n.__hyperlinkBack=null,t.panel&&(t.panel.uninitialize(),t.panel=null),t.navigateToLink(null,i)})),this.closer=a.createElement("div"),this.closer.classList.add("docking-panel-close"),this.closer.classList.add("hyperlink-back-closer"),this.container.appendChild(this.closer),this.closer.addEventListener("click",(function(){r.uninitialize(),n.__hyperlinkBack=null}))}var t,n;return t=e,(n=[{key:"uninitialize",value:function(){this.viewer.container.removeChild(this.container),this.container=null}}])&&o(t.prototype,n),e}();l.GlobalManagerMixin.call(s.prototype);var p=Autodesk.Viewing,c=p.Private,h=AutodeskNamespace("Autodesk.Viewing.Extensions.Hyperlink");function d(e,t,n){p.ToolInterface.call(this),this.setGlobalManager(e.globalManager),this.names=["hyperlink"];var i=this,r=-1,o=!1,l={},h={},d=null,u=null,v=null,A=null,k={},g="Hyperlink-bBox",C=null,x="Hyperlink-bBox-select",f=null,y=null,b=!1;this.active=!1,this.panel=null,this.fillColor=t.hyperlinkColor||4690585,this.opacity=t.hyperlinkOpacity||.6,this.selectionFillColor=t.hyperlinkColorSelection||7376094,this.selectedOpacity=t.hyperlinkOpacitySelected||.4,this.rectanglePadding=t.hyperlinkPadding||.5;var w=function(t,n,r){if(!d){var a=i.getDocument();d=a.createElement("div"),e.container.appendChild(d),d.setAttribute("data-i18n","Ctrl + Click to preview the link"),d.textContent=p.i18n.translate("Ctrl + Click to preview the link")}d.className="hyperlink-tooltip",d.style.top=n+20+"px",d.style.left=t+20+"px",d.intersectPoint=r},m=function(){d&&(e.container.removeChild(d),d=null)},B=function t(n){e.removeEventListener(p.GEOMETRY_LOADED_EVENT,t),i.loadHyperlinks()},E=function(){i.panel&&i.panel.updatePosition(),function(){if(d){var t=e.navigation.getCamera(),n=e.navigation.getScreenViewport(),i=(new THREE.Vector3).copy(d.intersectPoint);i.project(t);var r=Math.round((i.x+1)/2*n.width),a=Math.round((1-i.y)/2*n.height);d.style.left=r+20+"px",d.style.top=a+20+"px"}}()},T=function(e){i.setBackNode(e.data.node)};this.activate=function(t){this.active=!0,e.model&&e.model.isLoadDone()?i.loadHyperlinks():e.addEventListener(p.GEOMETRY_LOADED_EVENT,B),e.addEventListener(p.CAMERA_CHANGE_EVENT,E),e.addEventListener(p.HYPERLINK_NAVIGATE,T);var n=this.getBackNode();n&&(e.__hyperlinkBack=new s(this,e,n),this.setBackNode(null))},this.deactivate=function(t){this.active=!1,e.removeEventListener(p.CAMERA_CHANGE_EVENT,E),e.removeEventListener(p.GEOMETRY_LOADED_EVENT,B),e.removeEventListener(p.HYPERLINK_NAVIGATE,T),l={},h={},m(),this.panel&&(this.panel.uninitialize(),this.panel=null),e.__hyperlinkBack&&(e.__hyperlinkBack.uninitialize(),e.__hyperlinkBack=null),e.impl.clearOverlay(g),e.impl.clearOverlay(x)},this.isActive=function(){return this.active},this.update=function(e){return!1},this.handleSingleClick=function(t,n){this.clearSelection(),this.panel&&(this.panel.uninitialize(),this.panel=null);var o=e.model.getDocumentNode(),s=null;o&&(s=o.data.viewableID);var p=new THREE.Vector2(t.canvasX,t.canvasY);if(!b)return!1;if(e.model.is2d()){var c=e.impl.clientToViewport(t.canvasX,t.canvasY),d=e.impl.intersectGroundViewport(c);for(var u in l)if(l.hasOwnProperty(u)){var v=l[u],A=d.x,k=d.y;if(A>=v.bBox[0]&&A<=v.bBox[2]&&k>=v.bBox[1]&&k<=v.bBox[3]){if(v.node){var g=v.node.data.name;this.panel=new a(i,e,p,d,g,v.link,s,v.dbId,v.node,this.getThumbnail.bind(this))}else this.panel=new a(i,e,p,d,null,v.link,s);return this.highlightSelection(v.bBoxMesh),!0}}return!1}if(e.model.is3d()){var C=e.impl.hitTest(t.canvasX,t.canvasY,!1);if(!C)return!1;if(t.ctrlKey&&h[r])return this.controller.setIsLocked(!1),m(),(v=h[r]).node?(g=v.node.data.name,this.panel=new a(i,e,p,C.intersectPoint,g,v.link,s,r,v.node.data,this.getThumbnail)):this.panel=new a(i,e,p,C.intersectPoint,null,v.link,s,r),!0}return!1},this.handleButtonDown=function(e,t){return o=!0,!1},this.handleButtonUp=function(e,t){return o=!1,!1},this.handleMouseMove=function(t){if(!o){if(!b)return!1;if(e.model&&!e.model.is2d()){var n=e.impl.hitTest(t.canvasX,t.canvasY,!1);if(n){var i=n.dbId;if(i!=r&&(r=i,m()),this.panel&&this.panel.dbId===i)return;h.hasOwnProperty(r)?h[r]&&w(t.canvasX,t.canvasY,n.intersectPoint):(h[r]=null,this.loadHyperlink3d(r,t.canvasX,t.canvasY,n.intersectPoint))}else m()}return!1}},this.getCursor=function(){return d?"pointer":null},this.loadHyperlinks=function(){e.model.isPdf()?this.loadHyperlinksPDF():this.loadHyperlinksF2d()},this.loadHyperlinksPDF=function(){if(e.model.getData().metadata&&e.model.getData().metadata.hyperLinks){b=!0;var t=e.model.getData().metadata.hyperLinks;u={},v=[],A=[],this.rectanglePadding=0;for(var n=0;n<t.length;n++){var i=t[n];u[i.dbId]=[n],v.push(i.dbId),A.push(i.box[0],i.box[1],i.box[2],i.box[3])}this._onBulkProperties(t)}else b=!1},this.loadHyperlinksF2d=function(){if(!b){var t=e.model.getPropertyDb();t&&t.executeUserFunction("function userFunction(pdb) { \n                    var hyperlinkExists = false;\n                    pdb.enumAttributes(function(i, attrDef, attrRaw) {\n                        var name = attrRaw[0];\n                        if (name === 'hyperlink') {\n                            hyperlinkExists = true;\n                            return true;\n                        }\n                    });\n                    return hyperlinkExists;\n                }").then((function(e){b=e})).catch((function(e){var t="string"==typeof e?e:JSON.stringify(e);c.logger.error("Failed calling executeUserFunction with error ".concat(t))}))}var n=e.model.getData();if(v=n.stringDbIds,A=n.stringBoxes,l={},v){var i=[];u={};for(var r=0,a=v.length;r<a;++r){var o=v[r];o<1||(-1===i.indexOf(o)&&(i.push(o),u[o]=[]),u[o].push(r))}e.model.getBulkProperties(i,{propFilter:["hyperlink"]},this._onBulkProperties)}},this._onBulkProperties=function(t){var n=e.model.getDocumentNode();n&&(n=n.getRootNode());for(var i=0,r=t.length;i<r;++i){var a=t[i],o=a.dbId,s=a.properties[0].displayValue,p=null,c=null,h=n?n.search({viewableID:s}):null;if(h&&h.length&&(p=h[0]),!p&&this._isURL(s)&&(c=s),p||c)for(var d=u.hasOwnProperty(o)?u[o]:[],v=0;v<d.length;++v){var A=d[v];l[A]={dbId:o,link:c,node:p},this.highlightText(A)}}}.bind(this),this._isURL=function(e){if("string"==typeof e){if("http"===e.substr(0,4).toLowerCase())return!0;var t=e.indexOf("/");-1!==t&&(e=e.substr(0,t));var n=e.split(".").length;return t>0&&n>0||-1===t&&n>1}},this.navigateToLink=function(t,n){if(t)i.getWindow().open(t);else if(n)return e.dispatchEvent({type:p.HYPERLINK_EVENT,data:{bubbleNode:n}}),void setTimeout((function(){var t=n.getRootNode();e.loadDocumentNode(t.getDocument(),n)}),1)},this.loadHyperlink3d=function(t,n,i,r){e.getProperties(t,(function(a){for(var o=a.properties,l=0,s=o.length;l<s;l++){var p=o[l];if("__hyperlink__"===p.displayCategory){var c=null,d=p.displayValue,u=e.model.getDocumentNode();if(u){var v=(u=u.getRootNode()).search({viewableID:d});v&&v.length&&(c=v[0])}h[t]={link:d,node:c},w(n,i,r);break}}}))},this.getHyperlinks=function(){return _linkCache},this.getThumbnail=function(e,t,n){k.hasOwnProperty(e)?n(k[e]):p.Thumbnails.getUrlForBubbleNode(t).then((function(t){k[e]=t,n(t)})).catch((function(e){n(null)}))},this.highlightText=function(e){var t=this.rectanglePadding,n=A[4*e]-t,i=A[4*e+1]-t,r=A[4*e+2]+t,a=A[4*e+3]+t;l[e].bBox=[n,i,r,a],this.addRectangle(e,n,i,r,a)},this.addRectangle=function(t,n,i,r,a){var o=new THREE.Vector3(n,i,0),s=new THREE.Vector3(r,i,0),p=new THREE.Vector3(r,a,0),c=new THREE.Vector3(n,a,0),h=new THREE.Geometry;if(h.vertices.push(o),h.vertices.push(s),h.vertices.push(p),h.vertices.push(c),h.faces.push(new THREE.Face3(0,1,2)),h.faces.push(new THREE.Face3(0,3,2)),!C){var d=this.fillColor,u=this.opacity;C=new THREE.MeshBasicMaterial({color:d,opacity:u,transparent:!0,depthTest:!1,depthWrite:!1,side:THREE.DoubleSide}),e.impl.createOverlayScene(g)}var v=l[t].bBoxMesh=new THREE.Mesh(h,C,!0);e.impl.addOverlay(g,v)},this.highlightSelection=function(t){if(y=t,e.impl.removeOverlay(g,t),!f){var n=this.selectionFillColor,i=this.selectedOpacity;f=new THREE.MeshBasicMaterial({color:n,opacity:i,transparent:!0,depthTest:!1,depthWrite:!1,side:THREE.DoubleSide}),e.impl.createOverlayScene(x)}var r=new THREE.Mesh(t.geometry,f);e.impl.addOverlay(x,r)},this.clearSelection=function(){y&&(e.impl.clearOverlay(x),e.impl.addOverlay(g,y),y=null)},this.setBackNode=function(e){n.getCache().hyperlinkBackNode=e},this.getBackNode=function(){return n.getCache().hyperlinkBackNode}}p.GlobalManagerMixin.call(d.prototype),h.HyperlinkTool=d;var u=n(93379),v=n.n(u),A=n(7795),k=n.n(A),g=n(90569),C=n.n(g),x=n(3565),f=n.n(x),y=n(19216),b=n.n(y),w=n(44589),m=n.n(w),B=n(96643),E={};E.styleTagTransform=m(),E.setAttributes=f(),E.insert=C().bind(null,"head"),E.domAPI=k(),E.insertStyleElement=b(),v()(B.Z,E),B.Z&&B.Z.locals&&B.Z.locals;var T=Autodesk.Viewing,N=AutodeskNamespace("Autodesk.Viewing.Extensions.Hyperlink");function H(e,t){T.Extension.call(this,e,t),this.tool=null,this.name="hyperlink"}H.prototype=Object.create(T.Extension.prototype),H.prototype.constructor=H,H.prototype.load=function(){var e=this.options||{};return this.tool=new d(this.viewer,e,this),this.viewer.toolController.registerTool(this.tool),this.viewer.toolController.activateTool(this.tool.getName()),!0},H.prototype.unload=function(){return this.viewer.toolController.deactivateTool(this.tool.getName()),this.viewer.toolController.deregisterTool(this.tool),this.tool=null,!0},H.prototype.activate=function(){return!0},H.prototype.deactivate=function(){return!1},N.HyperlinkExtension=H,T.theExtensionManager.registerExtension("Autodesk.Hyperlink",H)})(),Autodesk.Extensions.Hyperlink=i})();
//# sourceMappingURL=Hyperlink.min.js.map