/*!
 * LMV v7.29.0
 * 
 * Copyright 2020 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
Autodesk.Extensions.ViewCubeUi=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=625)}({0:function(e,t){e.exports=THREE},4:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},425:function(e,t,n){var r=n(426);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},426:function(e,t,n){(e.exports=n(4)(!1)).push([e.i,".viewcube,.viewcubeWrapper{display:block;position:absolute;outline:none;width:170px;height:170px;right:-1px;top:-1px;opacity:0.7;margin:0;-webkit-transition:opacity 0.2s ease;-moz-transition:opacity 0.2s ease;-ms-transition:opacity 0.2s ease;-o-transition:opacity 0.2s ease;transition:opacity 0.2s ease}.viewcubeWrapper{pointer-events:none}.viewcube{pointer-events:auto}.rewindFrame{background-color:#FFFFFF;position:absolute;height:56px;width:56px;z-index:1002}.dropDownMenu{position:absolute;min-width:220px;margin:0;z-index:1001;background-color:#FFFFFF;font-family:sans-serif;font-size:14px;list-style-type:none;border:solid;border-width:1px;border-color:#979797}.dropDownMenuItem{position:relative;width:calc(100% - 24px);height:21px;padding-left:24px;padding-top:4px;background-color:#FFFFFF;cursor:pointer}.dropDownMenuCheckbox{position:relative;width:calc(100% - 4px);padding-top:4px;height:21px;margin-left:4px;background-color:#FFFFFF;cursor:pointer}.dropDownMenuCheck{padding-top:2px;cursor:pointer}.dropDownMenuCheckText{position:relative;padding-left:2px;margin:0;cursor:pointer}.dropDownMenuItemDisabled{color:#999999;position:relative;width:calc(100% - 5px);height:23px;background-color:#FFFFFF;cursor:pointer}.dropDownMenuItem:hover{background-color:#E7EEF6}.dropDownMenuCheckbox:hover{background-color:#E7EEF6}.textBox{font-size:15px;background-color:#000;opacity:0.6;padding:2px 10px;border-radius:2px;position:fixed;display:none;font-family:Monospace;color:#fff;z-index:1000}#colorCode{position:absolute;left:0px;top:0px}#text,#steeringWheel{position:absolute;left:0px;top:0px;z-index:900}.homeViewWrapper{display:block;outline:none;margin:18px 0px 0px -20px;opacity:0.7;width:24px;height:24px;background-image:url(data:image/png;base64,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);cursor:pointer;pointer-events:auto}.homeViewWrapper:hover{opacity:1}.homeViewWrapper.no-viewcube{position:absolute;right:12px;top:10px;margin:0}.homeViewMenu{display:none;position:absolute;right:10px;top:28px;background-color:#FFFFFF;border:1px solid #979797;z-index:1}.homeViewMenuItem{padding:5px 20px;font-family:sans-serif;font-size:14px;cursor:pointer;z-index:2}.homeViewMenuItem:hover{background-color:#E7EEF6}.homeViewWrapper .homeViewMenuHandle{display:none;position:relative;left:18px;top:18px}\n",""])},5:function(e,t,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},c=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=s.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),u=null,p=0,h=[],l=n(6);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(b(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(b(r.parts[a],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function m(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function v(e,t){var n=c(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=h[h.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),h.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=c(e.insertAt.before,n);n.insertBefore(t,i)}}function f(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=h.indexOf(e);t>=0&&h.splice(t,1)}function w(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return g(t,e.attrs),v(e,t),t}function g(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function b(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var a=p++;n=u||(u=w(t)),r=A.bind(null,n,a,!1),i=A.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(t,e.attrs),v(e,t),t}(t),r=V.bind(null,n,t),i=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=w(t),r=x.bind(null,n),i=function(){f(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=m(e,t);return d(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}e&&d(m(e,t),t);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete o[s.id]}}}};var M,y=(M=[],function(e,t){return M[e]=t,M.filter(Boolean).join("\n")});function A(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function x(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function V(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=l(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},6:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},625:function(e,t,n){"use strict";n.r(t),n.d(t,"ViewCubeUi",(function(){return x}));var r=n(0),i=Autodesk.Viewing,o=i.Private,a=o.DDSLoader,s=o.ShaderUtils.createShaderMaterial,c=o.WebGLRenderer,u=o.logger,p=i.isMobileDevice,h=i.errorCodeString,l=i.ErrorCodes,d=i.endpoint,m=i.getGlobal,v=i.GlobalManagerMixin,f=function(e){return Math.abs(e-1)<1e-12},w=function(e){return!(!f(e.length())||!f(Math.abs(e.x))&&!f(Math.abs(e.y))&&!f(Math.abs(e.z)))};function g(e){var t=e/2,n=16711680,o=65280,a=255,s=new r.Matrix4,c=[],u=new r.PlaneBufferGeometry(50,50),p=function(e,t){var n=i.getGlobal().document.createElement("canvas");n.width=n.height=128;var o=n.getContext("2d");o.font="128px Arial",o.fillStyle="rgba(255,255,255,1)",o.textAlign="center",o.textBaseline="middle",o.fillText(e,n.width/2,n.height/2);var a=new r.Texture(n);return a.needsUpdate=!0,new r.Mesh(u,new r.MeshBasicMaterial({map:a,side:r.DoubleSide,transparent:!0,color:t,depthWrite:!1,depthTest:!0}))};this.triadScene=new r.Scene,this.triadLabelScene=new r.Scene;var h=new r.BoxGeometry(e,10,10),l=new r.Mesh(h,new r.MeshBasicMaterial({color:n,shading:r.SmoothShading})),d=new r.Mesh(h,new r.MeshBasicMaterial({color:o,shading:r.SmoothShading})),m=new r.Mesh(h,new r.MeshBasicMaterial({color:a,shading:r.SmoothShading}));l.applyMatrix(s.makeTranslation(5,-t,-t)),d.applyMatrix(s.makeRotationZ(Math.PI/2)),d.applyMatrix(s.makeTranslation(-t,5,-t)),m.applyMatrix(s.makeRotationY(Math.PI/2)),m.applyMatrix(s.makeTranslation(-t,-t,5)),this.triadScene.add(l),this.triadScene.add(d),this.triadScene.add(m);var v=p("X",n),g=p("Y",o),b=p("Z",a),M=function(e){var n=-(50+t)/2-20,r=t+50;v.position.set(r,n,n),g.position.set(n,r,n),b.position.set(n,n,r),e&&(v.position.applyQuaternion(e),g.position.applyQuaternion(e),b.position.applyQuaternion(e))};M(),c.push(v),c.push(g),c.push(b),this.triadLabelScene.add(v),this.triadLabelScene.add(g),this.triadLabelScene.add(b),this.orient=function(e,t){if(w(e)&&w(t)&&!(this.up&&this.front&&e.equals(this.up)&&t.equals(this.front))){this.up=e.clone(),this.front=t.clone();var n,i,o,a,s=0,c=0;e.x?(n="x",i="y",o="z",s=2*Math.PI/3):e.y?(n="y",i="z",o="x"):e.z&&(n="z",i="x",o="y",s=-2*Math.PI/3),f(-t[i])?c=Math.PI:t[o]&&(c=-t[o]*e[n]*Math.PI/2),a=f(-e[n])?Math.PI:0;var u=new r.Quaternion,p=new r.Quaternion,h=new r.Vector3(1,1,1);h.normalize(),p.setFromAxisAngle(h,s),u.setFromAxisAngle(e,c),p.multiply(u),u.setFromAxisAngle(t,a),p.multiply(u),M(p),this.triadScene.setRotationFromQuaternion(p)}},this.getSprites=function(){return c}}function b(e,t,n,i,f){var b=this;v.call(this);var M=t,y=t.camera;t.setCube(this),b.currentFace="front",b.showTriad=f&&f.showTriad,b.localizeResourcePath=i;var A,x,V,C,F,E,P,T,S,I,R,k,L,D=["top,front","top right","top,left","top,back","bottom,front","bottom,right","bottom,left","bottom,back","left,front","front,right","right,back","back,left"],B=["front,top,right","back,top,right","front,top,left","back,top,left","front,bottom,right","back,bottom,right","front,bottom,left","back,bottom,left"],O=["Go Home",null,"Orthographic","Perspective","Perspective with Ortho Faces",null,"Set current view as Home","Focus and set as Home","Reset Home",null,"Set current view as Front","Set current view as Top","Reset orientation"],Y=[!0,null,!0,!0,!0,null,!0,!0,!0,null,!0,!0,!0],U=[null,null,function(){return!M.orthographicFaces&&!y.isPerspective},function(){return!M.orthographicFaces&&y.isPerspective},function(){return M.orthographicFaces},null,null,null,null,null,null,null,null],z=[];b.pcam=new r.PerspectiveCamera(45,1,1,2e3),b.ocam=new r.OrthographicCamera(-265,265,265,-265,-1e3,1e3),b.ocam.fov=b.pcam.fov,b.ocam.aspect=b.pcam.aspect,b.camera=y.isPerspective?b.pcam:b.ocam,b.camera.position.copy(y.position),b.center=new r.Vector3(0,0,0),b.camera.lookAt(b.center);var X,N,H,G,j,q,W,Z=[],Q=[],K=[],_=[],J=[],$=null,ee=null,te=null,ne=0,re=0,ie=!0,oe=!1,ae=!1,se=!1,ce=-1!=navigator.userAgent.search("Chrome"),ue=-1!=navigator.platform.search("Win32"),pe=!1,he=!1,le=null,de=[];this.width=0,this.height=0,this.animSpeed=500,this.animate=!0,this.compass=!1,this.viewScaleFactorCompass=1.5,this.viewScale=1,this.draggable=!0,this.wantHomeButton=!1,this.wantRollArrows=!0,this.wantContextMenu=!0,this.inactiveOpacity=.5;var me=function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width,h:t.height}},ve=function(e){e.preventDefault(),e.stopPropagation();var t=b.getDocument();ae=t.pointerLockElement===n||t.mozPointerLockElement===n||t.webkitPointerLockElement===n},fe=function(){b.renderCompass?(b.rollMesh.position.set(ne+30,ne+30,0),b.rollLeftMesh.position.set(ne+30,1.5*ne,.1),b.rollRightMesh.position.set(1.5*ne,ne+30,.1),b.contextMesh.position.set(1.6*ne,-1.6*ne,0)):(b.rollMesh.position.set(.5*ne+20,.5*ne+20,0),b.rollLeftMesh.position.set(.5*ne+20,ne+20,.1),b.rollRightMesh.position.set(ne+20,.5*ne+20,.1),b.contextMesh.position.set(ne,-ne,0))},we=function(){M.navApi.isActionEnabled("orbit")&&(n.style.opacity="1.0",he=!1),requestAnimationFrame(b.render)},ge=function(e){if(he||M.viewCubeMenuOpen||!M.navApi.isActionEnabled("orbit"))M.navApi.isActionEnabled("orbit")&&(n.style.opacity=1);else{var t=Math.max(4*Math.abs((e.clientX-W.x)/W.w-.5)-1,0),r=Math.max(4*Math.abs((e.clientY-W.y)/W.h-.5)-1,0),i=Math.max(0,Math.min(Math.sqrt(t*t+r*r),1));n.style.opacity=1-i*(1-b.inactiveOpacity)}},be=function(){M.viewCubeMenuOpen||(n.style.opacity=b.inactiveOpacity,he=!0,requestAnimationFrame(b.render))},Me=function(e){var t=new Image,n=b.getWindow(),i=d.getUseCredentials()&&(-1===e.indexOf("://")||-1!==e.indexOf(n.location.host));t.crossOrigin=i?"use-credentials":"anonymous";var o=new r.Texture(t);return t.onload=function(){o.needsUpdate=!0,++re>=11&&requestAnimationFrame(b.render)},t.src=e,o},ye=function(){var e,t,n=[],r=[];for(n[0]=ke(0,0),n[1]=ke(0,Math.PI/2),n[2]=ke(0,-Math.PI/2),n[3]=ke(0,Math.PI),n[4]=ke(Math.PI/2,0),n[5]=ke(Math.PI/2,Math.PI/2),n[6]=ke(Math.PI/2,-Math.PI/2),n[7]=ke(Math.PI/2,Math.PI),r[0]=Re(0,0,0),r[1]=Re(0,Math.PI/2,0),r[2]=Re(0,-Math.PI/2,0),r[3]=Re(0,Math.PI,0),r[4]=Re(Math.PI/2,0,0),r[5]=Re(Math.PI/2,Math.PI/2,0),r[6]=Re(Math.PI/2,-Math.PI/2,0),r[7]=Re(Math.PI/2,Math.PI,0),r[8]=Re(0,0,Math.PI/2),r[9]=Re(0,0,-Math.PI/2),r[10]=Re(-Math.PI/2,0,-Math.PI/2),r[11]=Re(-Math.PI,0,-Math.PI/2),Z.push(Ie(0,0)),Z[0].name="front",K.push(Z[0]),J.push(Z[0]),V.add(Z[0]),Z.push(Ie(0,Math.PI/2)),Z[1].name="right",K.push(Z[1]),J.push(Z[1]),V.add(Z[1]),Z.push(Ie(0,Math.PI)),Z[2].name="back",K.push(Z[2]),J.push(Z[2]),V.add(Z[2]),Z.push(Ie(0,-Math.PI/2)),Z[3].name="left",K.push(Z[3]),J.push(Z[3]),V.add(Z[3]),Z.push(Ie(Math.PI/2,0)),Z[4].name="bottom",K.push(Z[4]),J.push(Z[4]),V.add(Z[4]),Z.push(Ie(-Math.PI/2,0)),Z[5].name="top",K.push(Z[5]),J.push(Z[5]),V.add(Z[5]),e=Z.length,t=0;t<n.length;t++)Z.push(n[t]),Z[e+t].name=B[t],V.add(Z[e+t]),K.push(Z[e+t]),J.push(Z[e+t]);for(e=Z.length,t=0;t<r.length;t++)Z.push(r[t]),Z[e+t].name=D[t],V.add(Z[e+t]),K.push(Z[e+t]),J.push(Z[e+t])},Ae=function(e,t,n){var i,o=new r.Vector3;if("PerspectiveCamera"===t.type)o.copy(e),o.unproject(t),i=new r.Raycaster(t.position,o.sub(t.position).normalize());else{var a=new r.Vector3;a.copy(e),a.unproject(t),o.copy(t.position).negate().normalize(),i=new r.Raycaster(a,o)}return i.intersectObjects(n)},xe=function(e,t){var n=e.clientX-t.x,i=e.clientY-t.y;return n=n/t.w*2-1,i=(t.h-i)/t.h*2-1,new r.Vector3(n,i,.5)};function Ve(e,t){var n={};return 0===e.type.indexOf("touch")?e.touches.length>0?(n.clientX=e.touches[0].clientX,n.clientY=e.touches[0].clientY,n.pageX=e.touches[0].pageX,n.pageY=e.touches[0].pageY,n.screenX=e.touches[0].screenX,n.screenY=e.touches[0].screenY,n.movementX=n.screenX-t.prevX,n.movementY=n.screenY-t.prevY,n.which=M.navApi.getUseLeftHandedInput()?3:1):n=t.prevCoords:(n.clientX=e.clientX,n.clientY=e.clientY,n.pageX=e.pageX,n.pageY=e.pageY,n.screenX=e.screenX,n.screenY=e.screenY,n.which=e.which,oe?(n.movementX=e.movementX||e.mozMovementX||e.webkitMovementX||0,n.movementY=e.movementY||e.mozMovementY||e.webkitMovementY||0):(n.movementX=n.screenX-t.prevX,n.movementY=n.screenY-t.prevY)),t.prevX=n.screenX,t.prevY=n.screenY,t.prevCoords=n,n}var Ce=function(e){if(e.preventDefault(),e.stopPropagation(),M.navApi.isActionEnabled("orbit")&&!M.currentlyAnimating){var t,r=Ve(e,b);W=me(n),n.removeEventListener("mousemove",Te,!1),b.addDocumentEventListener("mouseup",Pe,!1),b.addDocumentEventListener("touchend",Pe,!1),M.navApi.getUsePivotAlways()||(M.pivot.copy(M.center),M.navApi.setPivotPoint(M.center),M.navApi.setPivotSetFlag(!1)),M.startInteraction(r.pageX,r.pageY);var i=M.navApi.getUseLeftHandedInput()?1:3;r.which!==i&&(b.animSpeed<=0?u.error("animSpeed cannot be 0 or less, use ViewCube.animate flag to turn on and off animation",h(l.VIEWER_INTERNAL_ERROR)):(t=xe(r,W),Ae(t,b.camera,J).length>0&&(Be(),b.draggable&&(b.addDocumentEventListener("mousemove",Fe,!1),b.addDocumentEventListener("touchmove",Fe,!1),oe&&(n.requestPointerLock(),se=ce&&ue)))))}},Fe=function e(t){if(t.preventDefault(),t.stopPropagation(),b.animSpeed<=0)return b.removeDocumentEventListener("mousemove",e,!1),b.removeDocumentEventListener("touchmove",e,!1),void u.error("animSpeed cannot be 0 or less",h(l.VIEWER_INTERNAL_ERROR));if(!M.currentlyAnimating){var n=Ve(t,b);oe&&se&&(se=!1,n.movementX=n.movementY=0),ae&&(n.movementX>300||n.movementY>300)&&(n.movementX=0,n.movementY=0),n.movementX!==n.movementY||0!==n.movementX?(ie=!1,pe=!0,M.showPivot(!0),M.currentCursor=new r.Vector2(n.pageX,n.pageY),M.orbit(M.currentCursor,M.startCursor,new r.Vector3(-n.movementX,n.movementY,0),M.startState),b.camera.lookAt(b.center),requestAnimationFrame(b.render)):M.currentlyAnimating=!1}},Ee=function(e){(e||(b.removeDocumentEventListener("mouseup",Pe,!1),b.removeDocumentEventListener("touchend",Pe,!1)),b.removeDocumentEventListener("mousemove",Fe,!1),b.removeDocumentEventListener("touchmove",Fe,!1),n.addEventListener("mousemove",Te,!1),ae)&&b.getDocument().exitPointerLock()};this.registerOnViewTypeChangedCb=function(e){e instanceof Function&&(le=e)},this.setViewType=function(e){switch(e){case o.VIEW_TYPES.ORTHOGRAPHIC:b.camera=b.ocam;break;case o.VIEW_TYPES.PERSPECTIVE:b.camera=b.pcam;break;case o.VIEW_TYPES.PERSPECTIVE_ORTHO_FACES:b.camera=ie?b.ocam:b.pcam;break;default:return}le&&le(e)};var Pe=function(e){var t,r,i;if(e.preventDefault(),e.stopPropagation(),M.currentlyAnimating||pe)return M.endInteraction(),M.showPivot(!1),pe=!1,void Ee(!1);var o=Ve(e,b);if(M.viewCubeMenuOpen){var a=o.clientX-W.x,s=o.clientY-W.y;if(M.menuOrigin.x<=a&&a<=M.menuOrigin.x+M.menuSize.x&&M.menuOrigin.y<=s&&s<=M.menuOrigin.y+M.menuSize.y){var c=Math.floor((s-5-M.menuOrigin.y)/25),p=function(e){u.track({name:"navigation/"+e,aggregate:"count"})};switch(c){case 0:p("home"),M.goHome();break;case 1:p("setortho");case 2:p("setpersp");case 3:b.setViewType(c);break;case 4:p("sethome"),M.setCurrentViewAsHome(!1);break;case 5:p("focushome"),M.setCurrentViewAsHome(!0);break;case 6:p("resethome"),M.resetHome();break;case 7:p("setfront"),M.setCurrentViewAsFront();break;case 8:p("settop"),M.setCurrentViewAsTop();break;case 9:M.resetOrientation()}}return M.viewCubeMenuOpen=!1,M.removeDropdownMenu(n),(o.clientX<W.x||o.clientX>W.w+W.x||o.clientY<W.y||o.clientY>W.h+W.y)&&be(),b.mouseMoveSave&&b.processMouseMove(b.mouseMoveSave),M.endInteraction(),void Ee(!1)}var h=M.navApi.getUseLeftHandedInput()?1:3;if(o.which===h)return M.viewCubeMenuOpen=!0,M.drawDropdownMenu(O,Y,U,o.clientX,o.clientY,n,W),void Ee(!0);var l=xe(o,W);if(t=Ae(l,b.camera,J),r=Ae(l,T,Q),i=Ae(l,T,_),r.length>0&&ie){for(var d=["top","bottom","right","left","front","back"],m=M.getOrientation(),v={front:{up:[0,1,2,3],right:[2,3,1,0],down:[1,0,3,2],left:[3,2,0,1]},right:{up:[0,1,5,4],right:[5,4,1,0],down:[1,0,4,5],left:[4,5,0,1]},left:{up:[0,1,4,5],right:[4,5,1,0],down:[1,0,5,4],left:[5,4,0,1]},back:{up:[0,1,3,2],right:[3,2,1,0],down:[1,0,2,3],left:[2,3,0,1]},top:{up:[5,4,2,3],right:[2,3,4,5],down:[4,5,3,2],left:[3,2,5,4]},bottom:{up:[4,5,2,3],right:[2,3,5,4],down:[5,4,3,2],left:[3,2,4,5]}}[b.currentFace][m],f=0;f<4;f++)if(r[0].object===Q[f]){x=d[v[f]];break}M.calculateCubeTransform(x),b.currentFace=x,M.elapsedTime=0,M.sphericallyInterpolateTransition()}if(i.length>0){if(M.elapsedTime=0,b.wantHomeButton&&i[0].object===_[j])return M.goHome(),void Ee(!1);if(b.wantContextMenu&&i[0].object===_[q])return M.viewCubeMenuOpen=!0,M.drawDropdownMenu(O,Y,U,o.clientX,o.clientY,n,W),void Ee(!0);if(b.wantRollArrows&&ie&&(i[0].object===_[N]||i[0].object===_[H])){var w=i[0].object===_[H],g={center:M.center.clone(),position:y.position.clone(),pivot:y.pivot.clone(),fov:y.fov,worldUp:M.sceneUpDirection.clone(),isOrtho:!1===y.isPerspective},A=M.center.clone().sub(y.position).normalize();w?g.up=y.up.clone().cross(A):(g.up=y.up.clone().multiplyScalar(-1),g.up.cross(A)),g.up.normalize(),M.goToView(g)}}if(t.length>0){var x=t[0].object.name;b.mouseMoveSave=e,b.cubeRotateTo(x)}Ee(!1)};this.cubeRotateTo=function(e){b.currentFace=e,M.orthographicFaces&&-1!==b.currentFace.indexOf(",")&&M.setCameraOrtho(!1),M.calculateCubeTransform(b.currentFace),M.elapsedTime=0,M.sphericallyInterpolateTransition((function(){b.mouseMoveSave&&b.processMouseMove(b.mouseMoveSave)}))},this.processMouseMove=function(e){var t,n,r;if(M.viewCubeMenuOpen||M.currentlyAnimating)b.mouseMoveSave=e;else{b.mouseMoveSave=null;var i=Ve(e,b),o=xe(i,W);if(t=Ae(o,b.camera,K),n=Ae(o,T,Q),r=Ae(o,T,_),$&&!pe&&($.material.color.setHex(12040636),$=null,requestAnimationFrame(b.render)),n.length>0&&!pe){$=n[0].object;for(var a=X.children.length;--a>=0;)if($===Q[a]){($=X.children[a]).material.color.setHex(45055);break}requestAnimationFrame(b.render)}ee&&!pe&&(ee.material.opacity=0,ee=null,requestAnimationFrame(b.render)),t.length>0&&!pe&&((ee=t[0].object).material.opacity=.3,requestAnimationFrame(b.render)),r.length>0&&!pe?te!==r[0].object&&(b.wantHomeButton&&r[0].object===_[j]?(te=r[0].object,_[j].material.map=de[0]):b.wantRollArrows&&r[0].object===_[N]?(te=r[0].object,_[G].material.map=de[1]):b.wantRollArrows&&r[0].object===_[H]?(te=r[0].object,_[G].material.map=de[2]):b.wantContextMenu&&r[0].object===_[q]?(te=r[0].object,_[q].material.map=de[6]):b.wantHomeButton&&te===_[j]?(te=null,_[j].material.map=de[3]):!b.wantRollArrows||te!==_[N]&&te!==_[H]&&te!==_[G]?b.wantContextMenu&&te===_[q]&&(te=null,_[q].material.map=de[5]):(te=null,_[G].material.map=de[4]),requestAnimationFrame(b.render)):null===te||pe||(b.wantHomeButton&&te===_[j]?(te=null,_[j].material.map=de[3]):!b.wantRollArrows||te!==_[N]&&te!==_[H]&&te!==_[G]?b.wantContextMenu&&te===_[q]&&(te=null,_[q].material.map=de[5]):(te=null,_[G].material.map=de[4]),requestAnimationFrame(b.render))}};var Te=function(e){M.navApi.isActionEnabled("orbit")&&b.processMouseMove(e)},Se=function(){W=me(n),b.width=n.offsetWidth,b.height=n.offsetHeight,b.pcam.aspect=b.ocam.aspect=b.width/b.height,b.pcam.updateProjectionMatrix(),b.ocam.updateProjectionMatrix(),b.camera.topFov=b.camera.bottomFov=b.camera.fov/2,b.camera.leftFov=b.camera.rightFov=b.camera.aspect*b.camera.fov/2,b.pcam.aspect=b.ocam.aspect=b.camera.aspect,b.pcam.topFov=b.ocam.topFov=b.camera.topFov,b.pcam.bottomFov=b.ocam.bottomFov=b.camera.bottomFov,b.pcam.leftFov=b.ocam.leftFov=b.camera.leftFov,b.pcam.rightFov=b.ocam.rightFov=b.camera.rightFov,b.renderer.setSize(b.width,b.height),requestAnimationFrame(b.render)},Ie=function(e,t){var n,i=Math.floor(.45*ne/2)||45,o=Math.floor(.6*ne/2)||60,a=i+o,s=new r.Geometry,c=new r.Vector3(0,0,0),u=new r.Vector3(o,-o,a),p=new r.Vector3(o,o,a),h=new r.Vector3(-o,o,a),l=new r.Vector3(-o,-o,a);return s.vertices.push(c),s.vertices.push(u),s.vertices.push(p),s.vertices.push(h),s.vertices.push(l),s.faces.push(new r.Face3(1,2,3)),s.faces.push(new r.Face3(1,3,4)),s.applyMatrix((new r.Matrix4).makeRotationX(e)),s.applyMatrix((new r.Matrix4).makeRotationY(t)),s.computeFaceNormals(),s.computeVertexNormals(),n=new r.MeshBasicMaterial({overdraw:!0,opacity:0,color:45055,transparent:!0}),new r.Mesh(s,n)},Re=function(e,t,n){var i,o=Math.floor(.45*ne/2)||45,a=Math.floor(.6*ne/2)||60,s=o+a,c=new r.Geometry,u=new r.Vector3(a,s,s),p=new r.Vector3(-a,s,s),h=new r.Vector3(-a,a,s),l=new r.Vector3(a,a,s),d=new r.Vector3(a,s,a),m=new r.Vector3(-a,s,a),v=new r.Vector3(-a,s,s),f=new r.Vector3(a,s,s);return c.vertices.push(u),c.vertices.push(p),c.vertices.push(h),c.vertices.push(l),c.vertices.push(d),c.vertices.push(m),c.vertices.push(v),c.vertices.push(f),c.faces.push(new r.Face3(0,1,2)),c.faces.push(new r.Face3(0,2,3)),c.faces.push(new r.Face3(4,5,6)),c.faces.push(new r.Face3(4,6,7)),c.applyMatrix((new r.Matrix4).makeRotationX(e)),c.applyMatrix((new r.Matrix4).makeRotationY(t)),c.applyMatrix((new r.Matrix4).makeRotationZ(n)),c.computeFaceNormals(),c.computeVertexNormals(),i=new r.MeshBasicMaterial({overdraw:!0,opacity:0,color:45055,transparent:!0}),new r.Mesh(c,i)},ke=function(e,t){var n,i=Math.floor(.45*ne/2)||45,o=Math.floor(.6*ne/2)||60,a=i+o,s=new r.Geometry,c=new r.Vector3(a,a,a),u=new r.Vector3(o,a,a),p=new r.Vector3(o,o,a),h=new r.Vector3(a,o,a),l=new r.Vector3(a,a,o),d=new r.Vector3(a,a,a),m=new r.Vector3(a,o,a),v=new r.Vector3(a,o,o),f=new r.Vector3(a,a,a),w=new r.Vector3(a,a,o),g=new r.Vector3(o,a,o),b=new r.Vector3(o,a,a);return s.vertices.push(c),s.vertices.push(u),s.vertices.push(p),s.vertices.push(h),s.vertices.push(l),s.vertices.push(d),s.vertices.push(m),s.vertices.push(v),s.vertices.push(f),s.vertices.push(w),s.vertices.push(g),s.vertices.push(b),s.faces.push(new r.Face3(0,1,2)),s.faces.push(new r.Face3(0,2,3)),s.faces.push(new r.Face3(4,5,6)),s.faces.push(new r.Face3(4,6,7)),s.faces.push(new r.Face3(8,9,10)),s.faces.push(new r.Face3(8,10,11)),s.applyMatrix((new r.Matrix4).makeRotationX(e)),s.applyMatrix((new r.Matrix4).makeRotationY(t)),s.computeFaceNormals(),s.computeVertexNormals(),n=new r.MeshBasicMaterial({overdraw:!0,opacity:0,color:45055,transparent:!0}),new r.Mesh(s,n)},Le=function(e){var t=M.cubeFront.clone(),n=M.sceneUpDirection.clone(),i=t.clone().cross(n);n.copy(i).cross(t),t.normalize(),n.normalize(),i.normalize();var o=new r.Vector3(t.x,n.x,i.x).multiplyScalar(e.x);return o.add(new r.Vector3(t.y,n.y,i.y).multiplyScalar(e.y)),o.add(new r.Vector3(t.z,n.z,i.z).multiplyScalar(e.z)),o};this.render=function(){b.camera=y.isPerspective?b.pcam:b.ocam;var e=b.compass?b.viewScaleFactorCompass*b.viewScale:b.viewScale,t=M.center.clone().sub(y.position).normalize(),n=y.up.normalize(),i=new r.Matrix4;t=Le(t),n=Le(n),b.camera.position.copy(t),b.camera.position.multiplyScalar(-e/b.camera.position.length()),b.camera.up=n.normalize(),b.camera.lookAt(b.center),De();var o=b.renderTriad&&w(M.sceneUpDirection)&&w(M.sceneFrontDirection),a=b.renderer;if(a){for(var s=0;s<z.length;s++)i.lookAt(b.camera.position,z[s].position,b.camera.up),z[s].setRotationFromMatrix(i);a.clear(),a.render(A,b.camera),a.render(x,b.camera),a.render(C,b.camera),o&&(F.orient(M.sceneUpDirection,M.sceneFrontDirection.clone().multiplyScalar(-1)),a.render(F.triadScene,b.camera),a.render(F.triadLabelScene,b.camera)),a.render(V,b.camera),b.renderCompass&&a.render(P,b.camera),a.render(E,T)}},this.getScreenShot=function(e){return new Promise((function(e,t){var n=b.renderer;if(!n)return t("No renderer");var r=b.getDocument().createElement("canvas");r.width=b.width,r.height=b.height;var i=r.getContext("2d");i.fillStyle="#FFFFFF",i.fillRect(0,0,b.width,b.height),n.domElement.toBlob((function(t){var n=new Image,o=b.getWindow();n.src=o.URL.createObjectURL(t),n.onload=function(){i.drawImage(n,0,0,b.width,b.height),o.URL.revokeObjectURL(n.src),r.toBlob((function(t){e(t)}),"image/png")}}),"image/png")}))};var De=function(){!(ie=M.isFaceView())||he||M.currentlyAnimating?Be():Oe(),he?Ye():Ue(),he?ze():Xe()},Be=function(){E.remove(X),_[G].material.opacity=0,_[q].material.opacity=0},Oe=function(){E.add(X);var e=b.wantRollArrows?1:0;_[G].material.opacity=e,_[q].material.opacity=e},Ye=function(){L.material.opacity=p()?1:0},Ue=function(){L.material.opacity=b.wantContextMenu?1:0},ze=function(){R.material.opacity=0},Xe=function(){R.material.opacity=b.wantHomeButton?1:0};this.refreshCube=function(){Se()},this.setSize=function(e,t){if(b.width=e,b.height=t,n.children.length>1)for(var r=1;r<n.children.length;r++)n.children[r].style.bottom=(b.height/5).toString()+"px";Se()},this.useTransparency=function(e){he=e,e?(n.onmouseover=we,n.onmousemove=ge,n.onmouseout=be,be()):(n.onmouseover=null,n.onmouseout=null,n.onmousemove=null,n.style.opacity="1.0")},this.showTriad=function(e){e!==b.renderTriad&&(b.renderTriad=e,requestAnimationFrame(b.render))},this.showCompass=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.initCompass(),b.renderCompass!==e&&(b.prevRenderCompass=b.renderCompass,b.renderCompass=e,fe(),requestAnimationFrame(b.render))},this.setCompassRotation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.initCompass();var t=e-b.northAngle;0!==t&&(b.northAngle=e,b.compassPointerMeshUp.rotateZ(t),b.compassPointerMeshDown.rotateZ(t),requestAnimationFrame(b.render))},this.initCompass=function(){if(!b.hasCompass){b.hasCompass=!0,b.northAngle=0;var e=Autodesk.Viewing.Private.getResourceUrl;P=new r.Scene;var t=2.9*ne,n=new r.PlaneBufferGeometry(t,t,2,2),i=new r.MeshBasicMaterial({color:0,side:r.DoubleSide,map:Me(e("res/textures/VCcompass-pointer-b.png")),shading:r.FlatShading,transparent:!0}),o=new r.MeshBasicMaterial({color:0,side:r.DoubleSide,map:Me(e("res/textures/VCcompass-base.png")),shading:r.FlatShading,transparent:!0}),a=new r.Mesh(n,i),s=new r.Mesh(n,i),c=new r.Mesh(n,o);b.compassPointerMeshUp=a,b.compassPointerMeshDown=s;var u=-Math.PI/2;c.rotateX(u),a.rotateX(u),s.rotateX(u);var p=.5*-ne-(Math.floor(.25*ne/2)||25);c.translateZ(p),a.translateZ(p+.1),s.translateZ(p-.1),P.add(c),P.add(a),P.add(s),requestAnimationFrame(b.render)}},this.showControls=function(e){e||void 0===e?we():be()},this.dtor=function(){this.renderer=null,le=null},this.refreshTexture=function(e){var t=Autodesk.Viewing.Private.getResourceUrl,n=this.localizeResourcePath||"res/textures/",i=(new a).load(t(n+"VCcrossRGBA8small.dds"),e);i.minFilter=i.maxFilter=r.LinearFilter,this.texture&&this.texture.dispose(),this.texture=i;var o=this.material;if(!o){var c=r.ShaderLib.cube;(o=s(c)).depthWrite=!1,this.material=o}return o.uniforms.tCube.value=i,o},this.localize=function(){var e=this,t=m();this.localizeResourcePath=t.LOCALIZATION_REL_PATH,this.refreshTexture((function(){requestAnimationFrame(e.render)}))},function(){var e=n.getBoundingClientRect();b.width=e.width,b.height=e.height,W=me(n),(T=new r.PerspectiveCamera(70,b.height/b.width,1,1e4)).position.set(0,0,500),A=new r.Scene,x=new r.Scene,V=new r.Scene,C=new r.Scene,E=new r.Scene,ie=!0,ne=160,b.viewScale=4*ne;var t=b.refreshTexture(),i=r.LinearFilter,o=Autodesk.Viewing.Private.getResourceUrl,a="res/textures/",s=new r.BoxGeometry(ne,ne,ne,4,4,4),p=new r.BoxGeometry(ne+1,ne+1,ne+1,4,4,4);(S=new r.Mesh(s,t)).position.set(0,0,0),x.add(S);var h=Me(o(a+"VCedge1.png"));h.minFilter=h.maxFilter=i,(I=new r.Mesh(p,new r.MeshBasicMaterial({map:h,overdraw:!1,transparent:!0,shading:r.SmoothShading}))).position.set(0,0,0),C.add(I),F=new g(ne+20),Array.prototype.push.apply(z,F.getSprites());var l=ne+5,d=new r.Geometry,m=new r.Vector3(-30,0,0),v=new r.Vector3(30,0,0),f=new r.Vector3(0,-30,0);d.vertices.push(m),d.vertices.push(v),d.vertices.push(f),d.faces.push(new r.Face3(1,0,2)),d.computeFaceNormals();var w=new r.MeshBasicMaterial({overdraw:!0,color:12040636,depthTest:!1,depthWrite:!1,transparent:!1,opacity:1,shading:r.FlatShading}),y=new r.MeshBasicMaterial({overdraw:!0,color:12040636,depthTest:!1,depthWrite:!1,transparent:!1,opacity:1,shading:r.FlatShading}),P=new r.MeshBasicMaterial({overdraw:!0,color:12040636,depthTest:!1,depthWrite:!1,transparent:!1,opacity:1,shading:r.FlatShading}),D=new r.MeshBasicMaterial({overdraw:!0,color:12040636,depthTest:!1,depthWrite:!1,transparent:!1,opacity:1,shading:r.FlatShading}),B=new r.PlaneBufferGeometry(.5*ne,.3*ne,2,2),O=new r.MeshBasicMaterial({transparent:!0,opacity:0}),Y=new r.Mesh(d,w),U=new r.Mesh(B,O);Y.position.set(0,l,0),U.position.set(0,.9*l,.1);var Z=new r.Mesh(d,y),K=new r.Mesh(B,O);Z.position.set(0,-l,0),K.position.set(0,.9*-l,.1),Z.rotation.z+=Math.PI,K.rotation.z+=Math.PI;var J=new r.Mesh(d,P),$=new r.Mesh(B,O);J.position.set(l,0,0),$.position.set(.9*l,0,.1),J.rotation.z-=Math.PI/2,$.rotation.z-=Math.PI/2;var ee=new r.Mesh(d,D),te=new r.Mesh(B,O);ee.position.set(-l,0,0),te.position.set(.9*-l,0,.1),ee.rotation.z+=Math.PI/2,te.rotation.z+=Math.PI/2,(X=new r.Object3D).position.set(0,0,0),X.add(Y),X.add(Z),X.add(J),X.add(ee),E.add(U),E.add(K),E.add($),E.add(te),E.add(X),Q.push(U),Q.push(K),Q.push($),Q.push(te);var re=new r.PlaneBufferGeometry(ne/3,ne/3,2,2),ae=new r.MeshBasicMaterial({map:Me(o(a+"VChome.png")),transparent:!0,shading:r.FlatShading});(R=new r.Mesh(re,ae)).position.set(-ne,ne,0),j=_.length,E.add(R),_.push(R);var se=new r.PlaneBufferGeometry(1.5*ne,1.5*ne,2,2),ce=new r.MeshBasicMaterial({map:Me(o(a+"VCarrows.png")),shading:r.FlatShading,depthTest:!1,depthWrite:!1,transparent:!0}),ue=new r.Mesh(se,ce);b.rollMesh=ue;var pe=new r.PlaneBufferGeometry(.6*ne,.45*ne,2,2),he=new r.MeshBasicMaterial({transparent:!0,opacity:0}),le=new r.Mesh(pe,he);b.rollLeftMesh=le;var we=new r.PlaneBufferGeometry(.45*ne,.6*ne,2,2),ge=new r.MeshBasicMaterial({transparent:!0,opacity:0}),be=new r.Mesh(we,ge);b.rollRightMesh=be,E.add(ue),E.add(le),E.add(be),N=_.length,_.push(le),H=_.length,_.push(be),G=_.length,_.push(ue);var Ae=new r.PlaneBufferGeometry(ne/2.3,ne/2.3,2,2),xe=new r.MeshBasicMaterial({map:Me(o(a+"VCcontext.png")),transparent:!0,depthTest:!1,depthWrite:!1,shading:r.FlatShading});L=new r.Mesh(Ae,xe),b.contextMesh=L,q=_.length,E.add(L),_.push(L),fe();var Ve=new r.Geometry;Ve.vertices.push(new r.Vector3(0,0,0));var Fe,Ee=Math.floor(.2*ne/2)||20;if(Ve.vertices.push(new r.Vector3(-ne/2,-ne/2-Ee,-ne/2)),Ve.vertices.push(new r.Vector3(ne/2,-ne/2-Ee,-ne/2)),Ve.vertices.push(new r.Vector3(ne/2,-ne/2-Ee,ne/2)),Ve.vertices.push(new r.Vector3(-ne/2,-ne/2-Ee,ne/2)),Ve.faces.push(new r.Face3(4,3,2)),Ve.faces.push(new r.Face3(4,2,1)),Fe=new r.MeshBasicMaterial({color:0,transparent:!0,opacity:.5}),k=new r.Mesh(Ve,Fe),A.add(k),ye(),"CANVAS"===M.renderer.toUpperCase()?b.renderer=new r.CanvasRenderer:"WEBGL"===M.renderer.toUpperCase()?b.renderer=new c({alpha:!0,antialias:!1}):(u.warn("Incorrect use of Autocam.renderer property"),b.renderer=new r.CanvasRenderer),b.useTransparency(!0),b.setSize(b.width,b.height),b.camera.topFov=b.camera.bottomFov=b.camera.fov/2,b.camera.leftFov=b.camera.rightFov=b.camera.aspect*b.camera.fov/2,b.pcam.topFov=b.ocam.topFov=b.camera.topFov,b.pcam.bottomFov=b.ocam.bottomFov=b.camera.bottomFov,b.pcam.leftFov=b.ocam.leftFov=b.camera.leftFov,b.pcam.rightFov=b.ocam.rightFov=b.camera.rightFov,b.renderer.autoClear=!1,b.renderer.setSize(b.width,b.height),b.renderer.sortObjects=!1,n.appendChild(b.renderer.domElement),n.addEventListener("touchstart",Ce,!1),n.addEventListener("mousedown",Ce,!1),n.addEventListener("mousemove",Te,!1),oe=!1){var Pe=b.getDocument();Pe.exitPointerLock=Pe.exitPointerLock||Pe.mozExitPointerLock||Pe.webkitExitPointerLock,n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,b.addDocumentEventListener("pointerlockchange",ve,!1),b.addDocumentEventListener("mozpointerlockchange",ve,!1),b.addDocumentEventListener("webkitpointerlockchange",ve,!1)}de.push(Me(o(a+"VChomeS.png"))),de.push(Me(o(a+"VCarrowsS0.png"))),de.push(Me(o(a+"VCarrowsS1.png"))),de.push(Me(o(a+"VChome.png"))),de.push(Me(o(a+"VCarrows.png"))),de.push(Me(o(a+"VCcontext.png"))),de.push(Me(o(a+"VCcontextS.png")))}()}o.ViewCube=b;n(425);var M=Autodesk.Viewing,y=Autodesk.Viewing.Private,A=M.getGlobal();function x(e,t){M.Extension.call(this,e,t),this.container=null,this.cube=null,this.viewcube=null,this.homeViewContainer=null,this._created=!1,this._initTriadVisibility=!1,this.refreshCube=this.refreshCube.bind(this),this.displayViewCube=this.displayViewCube.bind(this),this.setViewType=this.setViewType.bind(this),this._updateView=this._updateView.bind(this),this._onModelAdded=this._onModelAdded.bind(this)}x.prototype={constructor:x,load:function(){var e=this;if(this.create(),this._displayViewCube(this.viewer.impl.is2d),this.localize(),this.viewer.dispatchEvent({type:M.VIEW_CUBE_CREATED_EVENT}),this.viewer.addEventListener(M.VIEWER_RESIZE_EVENT,this.refreshCube),this.viewer.prefs.addListeners(y.Prefs3D.VIEW_CUBE,this.displayViewCube),this.viewer.prefs.addListeners(y.Prefs3D.VIEW_TYPE,this.setViewType),this.viewer.model){var t=this.viewer.getVisibleModels().filter((function(t){return!!e.viewer.impl.is2d===t.is2d()}));this._onModelAdded({model:t[0]})}return this.viewer.addEventListener(M.MODEL_ADDED_EVENT,this._onModelAdded),this._setDefaultView(),!0},unload:function(){return this.viewer.prefs.removeListeners(y.Prefs3D.VIEW_CUBE,this.displayViewCube),this.viewer.prefs.removeListeners(y.Prefs3D.VIEW_TYPE,this.setViewType),this.viewer.removeEventListener(M.VIEWER_RESIZE_EVENT,this.refreshCube),this.viewer.removeEventListener(M.MODEL_ADDED_EVENT,this._onModelAdded),this.container&&(this.viewer.container.removeChild(this.container),this.viewcube=null),this.cube&&(this.cube.dtor(),this.cube=null),this.homeViewContainer=null,this.hideHomeViewMenu=null,this.viewer=null,!0},create:function(){this._created||(this.initContainer(),this.initHomeButton(),this._created=!0)},initContainer:function(){var e=this.getDocument();this.container=e.createElement("div"),this.container.className="viewcubeWrapper",this.viewer.container.appendChild(this.container)},initHomeButton:function(){if(!this.homeViewContainer){var e=this.getDocument().createElement("div");e.className="homeViewWrapper",this.container.appendChild(e),this.homeViewContainer=e;var t=this;e.addEventListener("click",(function(e){t.viewer.navigation.setRequestHomeView(!0)}))}},setVisible:function(e){this.container.style.display=e?"block":"none"},_setDefaultView:function(){this.viewer.impl.is2d||this.viewer.impl.getModelCamera(this.viewer.model)||this.viewer.prefs.dispatchEvent(y.Prefs3D.VIEW_TYPE)},_updateView:function(e){this.viewer.impl.is2d||(this.viewer.prefs.set(y.Prefs3D.VIEW_TYPE,e)||e!==this.viewer.autocam.getViewType()&&this.viewer.prefs.dispatchEvent(y.Prefs3D.VIEW_TYPE))},setViewType:function(e){!this.viewer.impl.is2d&&this.cube&&this.cube.setViewType(e)},showTriad:function(e){this.cube?this.cube.showTriad(e):this._initTriadVisibility=e},setViewCube:function(e){this.cube&&this.cube.cubeRotateTo(e)},displayHomeButton:function(e){this.homeViewContainer&&(this.homeViewContainer.style.display=e?"":"none")},displayViewCube:function(e,t){if(t&&this.viewer.prefs.set(y.Prefs3D.VIEW_CUBE,e),!e||this.cube||this.viewer.impl.is2d){if(!this.cube)return void this._positionHomeButton()}else{var n=this.getDocument();this.viewcube=n.createElement("div"),this.viewcube.className="viewcube",this.container.appendChild(this.viewcube),this.cube=new b("cube",this.viewer.autocam,this.viewcube,A.LOCALIZATION_REL_PATH),this.cube.registerOnViewTypeChangedCb(this._updateView),this.cube.setGlobalManager(this.globalManager),this.container.appendChild(this.homeViewContainer),this._initTriadVisibility&&this.showTriad(!0),delete this._initTriadVisibility}this.viewcube.style.display=e?"block":"none",this._positionHomeButton(),e&&this.viewer.autocam.refresh()},localize:function(){this.cube&&this.cube.localize()},showCompass:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cube&&this.cube.showCompass(e)},setCompassRotation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.cube&&this.cube.setCompassRotation(e)},_initCompass:function(e){var t=e&&e.getData(),n=t&&t.metadata,r=n&&n["world north vector"];if(r=(r=r&&r.XYZ)&&new THREE.Vector3(r[0],r[1],r[2])){var i=this.viewer.autocam.sceneFrontDirection.clone(),o=this.viewer.autocam.sceneUpDirection.clone(),a=new THREE.Vector3;a.crossVectors(i,r);var s=r.angleTo(i)*(a.dot(o)<0?-1:1),c=n["custom values"],u=c&&c.angleToTrueNorth||0;u*=Math.PI/180;var p=s+t.loadOptions&&t.loadOptions.applyRefPoint?0:u;this.cube.initCompass(),this.setCompassRotation(p),this.showCompass(!!this.viewer.prefs.get(y.Prefs3D.VIEW_CUBE_COMPASS))}},_displayViewCube:function(e){var t=!e&&this.viewer.prefs.get(y.Prefs3D.VIEW_CUBE);this.displayViewCube(t)},_onModelAdded:function(e){this._displayViewCube(this.viewer.impl.is2d),!this.cube||this.cube.hasCompass||this.viewer.impl.is2d||this._initCompass(e.model)},_positionHomeButton:function(){this.homeViewContainer&&(this.cube&&this.viewcube&&"block"===this.viewcube.style.display?this.homeViewContainer.classList.remove("no-viewcube"):this.homeViewContainer.classList.add("no-viewcube"))},refreshCube:function(){this.cube&&this.cube.refreshCube()}},M.theExtensionManager.registerExtension("Autodesk.ViewCubeUi",x)}});
//# sourceMappingURL=ViewCubeUi.min.js.map